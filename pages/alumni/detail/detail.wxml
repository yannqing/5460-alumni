<!--pages/alumni/detail/detail.wxml-->
<view class="alumni-detail-page">
  <view wx:if="{{alumniInfo}}">
    <!-- 背景和头像区域 -->
    <view class="profile-header">
      <image class="background-image" src="{{alumniInfo.background || 'https://cdn.example.com/backgrounds/default-bg.jpg'}}" mode="aspectFill"></image>
      <view class="header-overlay"></view>
      <view class="profile-left-section">
        <view class="avatar-nickname-row">
          <image class="avatar-circle" src="{{alumniInfo.avatarUrl || '/assets/images/default-avatar.png'}}" mode="aspectFill"></image>
          <view class="nickname-text">{{alumniInfo.nickname}}</view>
        </view>
        <view class="avatar-info-row">
          <view class="info-item">
            <text class="gender-icon {{alumniInfo.gender === 'male' ? 'gender-male' : 'gender-female'}}">{{alumniInfo.gender === 'male' ? '♂' : '♀'}}</text>
            <text class="info-text">{{alumniInfo.gender === 'male' ? '男' : '女'}}</text>
          </view>
          <view class="info-divider">·</view>
          <view class="info-item">
            <text class="info-text">{{alumniInfo.age}}岁</text>
          </view>
          <view class="info-divider">·</view>
          <view class="info-item">
            <text class="info-text">{{alumniInfo.zodiac}}</text>
          </view>
        </view>
      </view>
      <view class="profile-right-section">
        <view class="action-btn message-btn" bindtap="goToChat">私信</view>
        <view class="action-btn follow-btn {{alumniInfo.isFollowed ? 'followed' : ''}}" bindtap="toggleFollow">
          {{alumniInfo.isFollowed ? '已关注' : '关注TA'}}
        </view>
      </view>
    </view>

    <!-- 基本信息卡片 -->
    <view class="info-card">
      <view class="card-title">基本信息</view>
      <view class="info-row">
        <view class="info-label">昵称</view>
        <view class="info-value">{{alumniInfo.nickname}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">真实姓名</view>
        <view class="info-value">{{alumniInfo.name}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">出生日期</view>
        <view class="info-value">{{alumniInfo.birthDate}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">手机号</view>
        <view class="info-value">{{alumniInfo.phone}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">星座</view>
        <view class="info-value">{{alumniInfo.constellation}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">个性签名</view>
        <view class="info-value signature-text">{{alumniInfo.signature || '暂无签名'}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">微信号</view>
        <view class="info-value">{{alumniInfo.wxNum}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">QQ号</view>
        <view class="info-value">{{alumniInfo.qqNum}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">邮箱</view>
        <view class="info-value">{{alumniInfo.email}}</view>
      </view>
    </view>

    <!-- 位置信息卡片 -->
    <view class="info-card">
      <view class="card-title">位置信息</view>
      <view class="info-row">
        <view class="info-label">籍贯</view>
        <view class="info-value">{{alumniInfo.originProvince}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">当前所在洲</view>
        <view class="info-value">{{alumniInfo.curContinent}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">当前所在国</view>
        <view class="info-value">{{alumniInfo.curCountry}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">当前所在省市</view>
        <view class="info-value">{{alumniInfo.curProvince}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">当前所在市区</view>
        <view class="info-value">{{alumniInfo.curCity}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">当前所在村/区</view>
        <view class="info-value">{{alumniInfo.curCounty}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">详细地址</view>
        <view class="info-value">{{alumniInfo.address}}</view>
      </view>
    </view>

    <!-- 教育经历卡片 -->
    <view class="info-card" wx:if="{{alumniInfo.alumniEducationList && alumniInfo.alumniEducationList.length}}">
      <view class="card-title">教育经历</view>
      <block wx:for="{{alumniInfo.alumniEducationList}}" wx:key="index">
        <view class="education-block" style="{{index > 0 ? 'margin-top: 20rpx; border-top: 1px solid #eee; padding-top: 20rpx;' : ''}}">
          <view class="info-row">
            <view class="info-label">学校</view>
            <view class="info-value">{{item.schoolName}}</view>
          </view>
          <view class="info-row">
            <view class="info-label">入学年份</view>
            <view class="info-value">{{item.enrollmentYear}}</view>
          </view>
          <view class="info-row">
            <view class="info-label">毕业年份</view>
            <view class="info-value">{{item.graduationYear}}</view>
          </view>
          <view class="info-row">
            <view class="info-label">院系</view>
            <view class="info-value">{{item.department}}</view>
          </view>
          <view class="info-row">
            <view class="info-label">专业</view>
            <view class="info-value">{{item.major}}</view>
          </view>
          <view class="info-row">
            <view class="info-label">班级</view>
            <view class="info-value">{{item.className}}</view>
          </view>
          <view class="info-row">
            <view class="info-label">学历层次</view>
            <view class="info-value">{{item.educationLevel}}</view>
          </view>
        </view>
      </block>
    </view>

    <!-- 证件信息卡片 -->
    <view class="info-card">
      <view class="card-title">证件信息</view>
      <view class="info-row">
        <view class="info-label">证件类型</view>
        <view class="info-value">{{alumniInfo.identifyType === 0 ? '身份证' : (alumniInfo.identifyType === 1 ? '护照' : '其他')}}</view>
      </view>
      <view class="info-row">
        <view class="info-label">证件号</view>
        <view class="info-value">{{alumniInfo.identifyCode}}</view>
      </view>
    </view>

    <!-- 个人简介卡片 -->
    <view class="info-card">
      <view class="card-title">个人简介</view>
      <view class="bio-content">{{alumniInfo.description || alumniInfo.bio || '暂无简介'}}</view>
    </view>

    <!-- 爱好卡片 -->
    <view class="info-card" wx:if="{{alumniInfo.hobbies && alumniInfo.hobbies.length}}">
      <view class="card-title">兴趣爱好</view>
      <view class="hobby-list">
        <view class="hobby-tag" wx:for="{{alumniInfo.hobbies}}" wx:key="*this">{{item}}</view>
      </view>
    </view>

    <!-- 所属母校卡片 -->
    <view class="info-card">
      <view class="card-title">所属母校</view>
      <view class="school-item" bindtap="viewSchoolDetail" data-id="{{alumniInfo.schoolId}}">
        <view class="school-name">{{alumniInfo.school}}</view>
        <text class="school-arrow">›</text>
      </view>
    </view>

    <!-- 加入的校友会卡片 -->
    <view class="info-card" wx:if="{{alumniInfo.associations && alumniInfo.associations.length}}">
      <view class="card-title">加入的校友会</view>
      <view class="association-list">
        <view class="association-item" wx:for="{{alumniInfo.associations}}" wx:key="id" bindtap="viewAssociationDetail" data-id="{{item.id}}">
          <view class="association-info">
            <view class="association-name">{{item.name}}</view>
            <view class="association-role">{{item.role}}</view>
          </view>
          <text class="association-arrow">›</text>
        </view>
      </view>
    </view>
  </view>
</view>
