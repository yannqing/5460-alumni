<!--pages/audit/merchant/apply/apply.wxml-->
<custom-nav-bar showBack="{{true}}" useAuditStyle="{{true}}" auditTitle="商户管理">
<view class="page">
  <view class="group_7">
    <view class="list-header">
      <text class="text_20">商户申请</text>
    </view>
    <view class="filter-tabs-wrap">
      <view
        class="filter-tab {{currentTab === index ? 'active' : ''}}"
        wx:for="{{tabs}}"
        wx:key="*this"
        wx:for-index="index"
        data-index="{{index}}"
        bindtap="switchTab"
      >
        {{item}}
      </view>
    </view>
    <scroll-view class="scroll-list" scroll-y enable-back-to-top show-scrollbar="{{false}}" style="height: {{scrollListHeight}}px;" bindscrolltolower="loadMore">
      <view class="loading-state" wx:if="{{loading}}">
        <text>加载中...</text>
      </view>
      <view class="empty-block" wx:elif="{{!loading && applyList.length === 0}}">
        <text class="empty-text">暂无商户申请数据</text>
      </view>
      <view class="apply-list" wx:else>
        <view class="apply-item" wx:for="{{applyList}}" wx:key="id" data-id="{{item.id}}">
          <view class="apply-header">
            <view class="apply-name">{{item.merchantName}}</view>
            <view class="apply-status {{item.status}}">{{item.statusText}}</view>
          </view>
          <view class="apply-info">
            <text class="apply-label">申请人：</text>
            <text class="apply-value">{{item.applicantName}}</text>
          </view>
          <view class="apply-info">
            <text class="apply-label">联系电话：</text>
            <text class="apply-value">{{item.contactPhone}}</text>
          </view>
          <view class="apply-info">
            <text class="apply-label">申请时间：</text>
            <text class="apply-value">{{item.submitTime}}</text>
          </view>
          <view class="apply-info" wx:if="{{item.businessLicense}}">
            <text class="apply-label">营业执照：</text>
            <text class="apply-value">{{item.businessLicense}}</text>
          </view>
          <view class="apply-actions" wx:if="{{item.status === 'pending'}}">
            <view class="action-btn reject" data-id="{{item.id}}" data-status="rejected" catchtap="handleAudit">拒绝</view>
            <view class="action-btn approve" data-id="{{item.id}}" data-status="approved" catchtap="handleAudit">通过</view>
          </view>
        </view>
      </view>
      <view class="load-more" wx:if="{{hasMore && !loading && applyList.length > 0}}">
        <text>加载更多</text>
      </view>
    </scroll-view>
  </view>
</view>
</custom-nav-bar>
