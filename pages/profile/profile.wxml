<!--pages/profile/profile.wxml-->
<view class="profile-page">
  <!-- ä¸ªäººä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-info">
      <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill" bindtap="editProfile" wx:if="{{userInfo.avatarUrl}}"></image>
      <view class="user-avatar-placeholder" bindtap="editProfile" wx:else></view>
      <view class="user-detail">
        <view class="user-name">{{userInfo.nickname || 'ç”¨æˆ·'}}</view>
        <view class="edit-hint" bindtap="editProfile">ç¼–è¾‘èµ„æ–™ â€º</view>
      </view>
      <!-- å…³æ³¨å’Œç²‰ä¸ç»Ÿè®¡ -->
      <view class="follow-stats">
        <view class="follow-stat-item" bindtap="goToMyFans">
          <view class="follow-stat-value">{{followStats.fansCount || 0}}</view>
          <view class="follow-stat-label">ç²‰ä¸</view>
        </view>
        <view class="follow-stat-item" bindtap="goToMyFollow">
          <view class="follow-stat-value">{{followStats.followingCount || 0}}</view>
          <view class="follow-stat-label">å…³æ³¨</view>
        </view>
      </view>
    </view>

    <!-- æ•°æ®æ  -->
    <view class="stats-section">
      <view class="stat-item" bindtap="navigateTo" data-url="/pages/coupon/list/list?type=my">
        <view class="stat-value">{{stats.coupons}}</view>
        <view class="stat-label">ä¼˜æƒ åˆ¸</view>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item" bindtap="navigateTo" data-url="/pages/shop/list/list?type=followed">
        <view class="stat-value">{{stats.followedShops}}</view>
        <view class="stat-label">å…³æ³¨å•†é“º</view>
      </view>
      <view class="stat-divider"></view>
      <view class="stat-item" bindtap="navigateTo" data-url="/pages/footprint/footprint">
        <view class="stat-value">{{stats.footprints}}</view>
        <view class="stat-label">è¶³è¿¹</view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="card menu-card">
    <!-- ç®¡ç†å…¥å£ -->
    <view class="menu-item" bindtap="navigateTo" data-url="/pages/audit/index/index">
      <view class="menu-left">
        <text class="menu-icon">âš™ï¸</text>
        <text class="menu-name">ç®¡ç†å…¥å£</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="goToCertification">
      <view class="menu-left">
        <text class="menu-icon">ğŸ“</text>
        <text class="menu-name">æ ¡å‹è®¤è¯</text>
        <text class="cert-status-badge" wx:if="{{certificationStatus === 'verified'}}">å·²è®¤è¯</text>
        <text class="cert-status-badge unverified" wx:else>æœªè®¤è¯</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="navigateTo" data-url="/pages/article/my-list/my-list">
      <view class="menu-left">
        <text class="menu-icon">ğŸ“</text>
        <text class="menu-name">æˆ‘çš„æ–‡ç« </text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="navigateTo" data-url="/pages/coupon/list/list?type=my&tab=unused">
      <view class="menu-left">
        <text class="menu-icon">ğŸ«</text>
        <text class="menu-name">æˆ‘çš„åˆ¸åŒ…</text>
        <text class="menu-badge" wx:if="{{couponStats.unused > 0}}">{{couponStats.unused}}</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="applyMerchant">
      <view class="menu-left">
        <text class="menu-icon">ğŸª</text>
        <text class="menu-name">æˆ‘æ˜¯å•†å®¶</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="navigateTo" data-url="/pages/my-favorites/my-favorites">
      <view class="menu-left">
        <text class="menu-icon">â­</text>
        <text class="menu-name">æˆ‘çš„æ”¶è—</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
    <view class="menu-item" bindtap="navigateTo" data-url="/pages/profile/privacy/privacy">
      <view class="menu-left">
        <text class="menu-icon">ğŸ”</text>
        <text class="menu-name">ä¸ªäººéšç§</text>
      </view>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- åº•éƒ¨ç•™ç™½ -->
  <view class="bottom-space"></view>
</view>

<!-- æ ¡å‹å¡å¼¹çª— -->
<view class="alumni-card-modal" wx:if="{{showCardModal}}" bindtap="hideAlumniCard">
  <view class="alumni-card-content" catchtap="true">
    <view class="alumni-card-header">
      <text class="card-title">æ ¡å‹å¡</text>
      <text class="close-btn" bindtap="hideAlumniCard">Ã—</text>
    </view>
    <view class="alumni-card-body">
      <image class="card-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="card-name">{{userInfo.nickname}}</view>
      <view class="card-school">{{userInfo.school}} Â· {{userInfo.graduateYear}}çº§</view>
      <view class="card-qrcode">
        <image src="{{alumniCardQrcode}}" mode="aspectFit"></image>
      </view>
      <view class="card-number">æ ¡å‹å¡å·ï¼š{{alumniCardNumber}}</view>
    </view>
  </view>
</view>
