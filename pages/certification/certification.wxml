<!--pages/certification/certification.wxml-->
<view class="certification-container">
  <scroll-view scroll-y class="form-scroll">
    <!-- 认证状态提示 -->
    <view class="status-card card" wx:if="{{certificationStatus === 'pending'}}">
      <view class="status-icon">⏳</view>
      <view class="status-title">认证审核中</view>
      <view class="status-desc">我们正在审核您的认证信息，请耐心等待</view>
    </view>
    
    <view class="status-card card" wx:elif="{{certificationStatus === 'verified'}}">
      <view class="status-icon verified">✓</view>
      <view class="status-title">认证成功</view>
      <view class="status-desc">您已完成校友认证，可以享受更多权益</view>
    </view>
    
    <!-- 填写说明 -->
    <view class="tip-card card" wx:if="{{certificationStatus === 'none'}}">
      <view class="tip-title">📋 认证说明</view>
      <view class="tip-list">
        <text>1. 请确保填写的信息真实有效</text>
        <text>2. 上传清晰的毕业证或学位证照片</text>
        <text>3. 审核通常需要1-3个工作日</text>
        <text>4. 认证通过后可享受更多校友权益</text>
      </view>
    </view>

    <!-- 基本信息 -->
    <view class="section-card card">
      <view class="section-title">基本信息</view>
      <view class="form-item">
        <view class="label">真实姓名</view>
        <input class="input" placeholder="请输入真实姓名" value="{{form.name}}" data-field="name" bindinput="handleInput" />
      </view>
      <view class="form-item">
        <view class="label">学校名称</view>
        <input class="input" placeholder="请输入学校全称" value="{{form.school}}" data-field="school" bindinput="handleInput" />
      </view>
      <view class="form-item">
        <view class="label">专业</view>
        <input class="input" placeholder="请输入专业名称" value="{{form.major}}" data-field="major" bindinput="handleInput" />
      </view>
      <view class="form-item">
        <view class="label">入学年份</view>
        <picker mode="selector" range="{{yearOptions}}" value="{{enrollYearIndex}}" bindchange="handleEnrollYearChange">
          <view class="picker-value">{{yearOptions[enrollYearIndex] || '请选择'}}</view>
        </picker>
      </view>
      <view class="form-item">
        <view class="label">毕业年份</view>
        <picker mode="selector" range="{{yearOptions}}" value="{{graduateYearIndex}}" bindchange="handleGraduateYearChange">
          <view class="picker-value">{{yearOptions[graduateYearIndex] || '请选择'}}</view>
        </picker>
      </view>
      <view class="form-item">
        <view class="label">身份证号</view>
        <input class="input" type="idcard" placeholder="请输入身份证号" value="{{form.idCard}}" data-field="idCard" bindinput="handleInput" />
      </view>
    </view>

    <!-- 证明材料 -->
    <view class="section-card card">
      <view class="section-title">证明材料</view>
      
      <!-- 毕业证照片 -->
      <view class="upload-section">
        <view class="upload-label">
          <text class="label-text">毕业证/学位证照片</text>
          <text class="required">*</text>
        </view>
        <view class="upload-hint">请上传清晰的毕业证或学位证照片</view>
        <view class="upload-area" wx:if="{{!form.diploma}}" bindtap="chooseDiploma">
          <view class="upload-icon">📷</view>
          <view class="upload-text">点击上传</view>
        </view>
        <view class="image-preview" wx:else>
          <image class="preview-image" src="{{form.diploma}}" mode="aspectFit" />
          <view class="remove-btn" bindtap="removeImage" data-field="diploma">✕</view>
        </view>
      </view>
      
      <!-- 其他证书（可选） -->
      <view class="upload-section">
        <view class="upload-label">
          <text class="label-text">其他证书（可选）</text>
        </view>
        <view class="upload-hint">如荣誉证书、获奖证书等</view>
        <view class="upload-area" wx:if="{{!form.certificate}}" bindtap="chooseCertificate">
          <view class="upload-icon">📷</view>
          <view class="upload-text">点击上传</view>
        </view>
        <view class="image-preview" wx:else>
          <image class="preview-image" src="{{form.certificate}}" mode="aspectFit" />
          <view class="remove-btn" bindtap="removeImage" data-field="certificate">✕</view>
        </view>
      </view>
    </view>

    <!-- 底部留白 -->
    <view class="bottom-space"></view>
  </scroll-view>

  <!-- 提交按钮 -->
  <view class="bottom-action" wx:if="{{certificationStatus === 'none'}}">
    <button class="btn btn-primary" loading="{{submitting}}" bindtap="submitCertification">提交认证</button>
  </view>
</view>



