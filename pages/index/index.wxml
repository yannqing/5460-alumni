<!--pages/index/index.wxml-->
<view class="container">
  <!-- è½®æ’­å›¾ -->
  <view class="banner-section">
    <swiper class="banner-swiper" indicator-dots indicator-color="rgba(255,255,255,0.5)" indicator-active-color="#ff6b9d" autoplay circular interval="3000">
      <swiper-item wx:for="{{banners}}" wx:key="id" bindtap="onBannerTap" data-index="{{index}}">
        <image class="banner-image" src="{{item.image}}" mode="aspectFill" />
      </swiper-item>
    </swiper>
  </view>

  <!-- å¿«é€Ÿå…¥å£ -->
  <view class="quick-entry-section">
    <view class="quick-entry-bg-decoration"></view>
    <view class="quick-entry-content">
      <view class="quick-entry-title">æ ¡å‹åŠŸèƒ½</view>
      <view class="quick-entry-grid">
        <view class="quick-entry-item" wx:for="{{quickEntries}}" wx:key="id" bindtap="onQuickEntryTap" data-url="{{item.url}}">
          <view class="quick-entry-icon-wrapper">
            <view class="quick-entry-icon">
              <image src="{{item.icon}}" mode="aspectFit" />
            </view>
            <view class="quick-entry-icon-base"></view>
          </view>
          <view class="quick-entry-name">{{item.name}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- æ¨èæ¯æ ¡ -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">æ¨èæ¯æ ¡</view>
      <view class="section-more" bindtap="viewMoreSchools">
        <text>æŸ¥çœ‹æ›´å¤š</text>
        <text class="arrow">â€º</text>
      </view>
    </view>
    <view class="school-list">
      <view class="school-item card" wx:for="{{recommendSchools}}" wx:key="id" bindtap="viewSchoolDetail" data-id="{{item.id}}">
        <view class="school-header">
          <image class="school-icon" src="{{item.icon}}" mode="aspectFill" />
          <view class="school-info">
            <view class="school-name-row">
              <text class="school-name">{{item.name}}</text>
              <view wx:if="{{item.isCertified}}" class="certified-badge">âœ“ è®¤è¯</view>
            </view>
            <view class="school-location">{{item.location}}</view>
            <view class="school-tags">
              <text class="tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
            </view>
          </view>
          <view class="school-action" catchtap="toggleFollowSchool" data-id="{{item.id}}" data-followed="{{item.isFollowed}}">
            <view class="btn btn-small {{item.isFollowed ? 'btn-plain' : 'btn-primary'}}">
              {{item.isFollowed ? 'å·²å…³æ³¨' : 'å…³æ³¨'}}
            </view>
          </view>
        </view>
        <view class="school-stats">
          <text class="stat-item">æ ¡å‹ {{item.alumniCount}}</text>
          <text class="stat-divider">|</text>
          <text class="stat-item">æ ¡å‹ä¼š {{item.associationCount}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- çƒ­é—¨æ ¡å‹ä¼š -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">çƒ­é—¨æ ¡å‹ä¼š</view>
      <view class="section-more" bindtap="viewMoreAssociations">
        <text>æŸ¥çœ‹æ›´å¤š</text>
        <text class="arrow">â€º</text>
      </view>
    </view>
    <scroll-view class="association-scroll" scroll-x>
      <view class="association-item" wx:for="{{hotAssociations}}" wx:key="id" bindtap="viewAssociationDetail" data-id="{{item.id}}">
        <image class="association-icon" src="{{item.icon}}" mode="aspectFill" />
        <view class="association-name">{{item.name}}</view>
        <view class="association-school">{{item.schoolName}}</view>
        <view class="association-info">
          <text>{{item.location}}</text>
          <text class="dot">â€¢</text>
          <text>{{item.memberCount}}äºº</text>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ¨èæ ¡å‹ -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">æ¨èæ ¡å‹</view>
      <view class="section-more" bindtap="viewMoreAlumni">
        <text>æŸ¥çœ‹æ›´å¤š</text>
        <text class="arrow">â€º</text>
      </view>
    </view>
    <view class="alumni-list">
      <view class="alumni-item card" wx:for="{{recommendAlumni}}" wx:key="id" bindtap="viewAlumniDetail" data-id="{{item.id}}">
        <view class="alumni-header">
          <image class="avatar" src="{{item.avatar}}" mode="aspectFill" />
          <view class="alumni-info flex-1">
            <view class="alumni-name">{{item.name}}</view>
            <view class="alumni-education">{{item.school}} Â· {{item.major}} Â· {{item.graduateYear}}</view>
            <view class="alumni-work">{{item.company}} Â· {{item.position}}</view>
          </view>
          <view class="alumni-action" catchtap="toggleFollowAlumni" data-id="{{item.id}}" data-followed="{{item.isFollowed}}">
            <view class="btn btn-small {{item.isFollowed ? 'btn-plain' : 'btn-primary'}}">
              {{item.isFollowed ? 'å·²å…³æ³¨' : 'å…³æ³¨'}}
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- é™æ—¶ä¼˜æƒ åˆ¸ -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">
        <text>é™æ—¶ä¼˜æƒ åˆ¸</text>
        <text class="hot-badge">ğŸ”¥</text>
      </view>
      <view class="section-more" bindtap="viewMoreCoupons">
        <text>æŸ¥çœ‹æ›´å¤š</text>
        <text class="arrow">â€º</text>
      </view>
    </view>
    <view class="coupon-list">
      <view class="coupon-item card" wx:for="{{limitedCoupons}}" wx:key="id" bindtap="viewCouponDetail" data-id="{{item.id}}">
        <view class="coupon-content">
          <image class="coupon-image" src="{{item.image}}" mode="aspectFill" />
          <view class="coupon-info flex-1">
            <view class="coupon-title">{{item.title}}</view>
            <view class="coupon-merchant">{{item.merchant}}</view>
            <view class="coupon-price">
              <text class="price-now">Â¥{{item.discountPrice}}</text>
              <text wx:if="{{item.originalPrice > 0}}" class="price-original">Â¥{{item.originalPrice}}</text>
            </view>
            <view class="coupon-stock">
              <view class="stock-bar">
                <view class="stock-progress" style="width: {{item.stock/item.totalStock*100}}%"></view>
              </view>
              <text class="stock-text">å‰©ä½™{{item.stock}}/{{item.totalStock}}</text>
            </view>
          </view>
          <view class="coupon-action" catchtap="handleCoupon" data-id="{{item.id}}" data-type="{{item.type}}">
            <view class="btn btn-primary">{{item.type === 'rush' ? 'ç«‹å³æŠ¢è´­' : 'ç«‹å³é¢†å–'}}</view>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- æœ€æ–°æ´»åŠ¨ -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">æœ€æ–°æ´»åŠ¨</view>
      <view class="section-more" bindtap="viewMoreActivities">
        <text>æŸ¥çœ‹æ›´å¤š</text>
        <text class="arrow">â€º</text>
      </view>
    </view>
    <view class="activity-list">
      <view class="activity-item card" wx:for="{{recentActivities}}" wx:key="id" bindtap="viewActivityDetail" data-id="{{item.id}}">
        <image class="activity-cover" src="{{item.cover}}" mode="aspectFill" />
        <view class="activity-info">
          <view class="activity-title">{{item.title}}</view>
          <view class="activity-detail">
            <text class="activity-organizer">{{item.organizer}}</text>
          </view>
          <view class="activity-meta">
            <text class="activity-location">ğŸ“ {{item.location}}</text>
          </view>
          <view class="activity-footer">
            <text class="activity-time">ğŸ• {{item.startTime}}</text>
            <text class="activity-participant">{{item.participantCount}}äººæŠ¥å</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨ç•™ç™½ -->
  <view class="bottom-space"></view>
</view>
