<!--pages/activity/detail/detail.wxml-->
<!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
<custom-nav-bar title="æ´»åŠ¨è¯¦æƒ…" showBack="{{true}}"></custom-nav-bar>

<view class="container activity-detail-page">
  <view wx:if="{{loading}}" class="loading-wrap">
    <view class="loading">åŠ è½½ä¸­...</view>
  </view>

  <view wx:else>
  <image class="cover-image" src="{{activityInfo.cover}}" mode="aspectFill" />

    <view class="card hero-card">
    <view class="activity-title-large">{{activityInfo.title}}</view>
    <view class="activity-organizer">ä¸»åŠæ–¹ï¼š{{activityInfo.organizer}}</view>
      <view class="stat-row">
        <view class="stat-block">
          <text class="stat-number">{{activityInfo.participantCount}}</text>
          <text class="stat-label">å·²æŠ¥å</text>
        </view>
        <view class="stat-block">
          <text class="stat-number">{{activityInfo.maxParticipant}}</text>
          <text class="stat-label">äººæ•°ä¸Šé™</text>
        </view>
        <view class="stat-block">
          <text class="stat-number">4h</text>
          <text class="stat-label">æ´»åŠ¨æ—¶é•¿</text>
        </view>
      </view>
      <view class="reminder" wx:if="{{activityInfo.reminder}}">
        {{activityInfo.reminder}}
      </view>
      <view class="hero-actions">
        <button
          class="btn btn-primary"
          loading="{{buttonLoading}}"
          bindtap="joinActivity"
          disabled="{{activityInfo.isJoined}}"
        >
          {{activityInfo.isJoined ? 'å·²æŠ¥å' : 'ç«‹å³æŠ¥å'}}
        </button>
        <button class="btn btn-plain" bindtap="openMap">å¯¼èˆª</button>
      </view>
    </view>

    <view class="card info-card">
    <view class="info-row">
      <text class="info-icon">ğŸ“</text>
      <view class="info-content">
        <view class="info-label">æ´»åŠ¨åœ°ç‚¹</view>
        <view class="info-value">{{activityInfo.location}}</view>
        <view class="info-detail">{{activityInfo.address}}</view>
      </view>
    </view>

    <view class="info-row">
      <text class="info-icon">ğŸ•</text>
      <view class="info-content">
        <view class="info-label">æ´»åŠ¨æ—¶é—´</view>
        <view class="info-value">{{activityInfo.startTime}} - {{activityInfo.endTime}}</view>
        </view>
      </view>
    </view>

    <view class="card">
      <view class="section-title">æ´»åŠ¨æµç¨‹</view>
      <view class="timeline">
        <view class="timeline-item" wx:for="{{activityInfo.agenda}}" wx:key="*this">
          <view class="timeline-time">{{item.time}}</view>
          <view class="timeline-title">{{item.title}}</view>
        </view>
      </view>
    </view>

    <view class="card">
      <view class="section-title">æ´»åŠ¨è¯¦æƒ…</view>
      <view class="text-secondary">{{activityInfo.description}}</view>
    </view>

    <view class="card">
      <view class="section-title">è”ç»œæ–¹å¼</view>
      <view class="contact-card">
        <view class="contact-name">{{activityInfo.contact.name}}</view>
        <view class="contact-row">
          <text>ç”µè¯ {{activityInfo.contact.phone}}</text>
          <button class="contact-btn" size="mini" bindtap="handleCall">æ‹¨æ‰“</button>
        </view>
        <view class="contact-row">
          <text>å¾®ä¿¡ {{activityInfo.contact.wechat}}</text>
          <button class="contact-btn" size="mini" bindtap="handleCopyWechat">å¤åˆ¶</button>
        </view>
      </view>
    </view>
  </view>
</view>
