<!--pages/activity/list/list.wxml-->
<!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
<custom-nav-bar title="æ´»åŠ¨" showBack="{{true}}"></custom-nav-bar>

<!-- æ¶ˆæ¯é€šçŸ¥ç»„ä»¶ -->
<message-notification />

<view class="container activity-page">
  <view class="activity-hero card">
    <view class="hero-header">
      <view>
        <view class="hero-title">æ ¡å‹æ´»åŠ¨</view>
        <view class="hero-subtitle">ä¸€èµ·é“¾æ¥æ›´æœ‰èƒ½é‡çš„åŒä¼´</view>
      </view>
      <button class="hero-btn" size="mini" plain>å‘å¸ƒæ´»åŠ¨</button>
    </view>
    <view class="hero-stats">
      <view class="stat-item">
        <text class="stat-num">{{stats.total}}</text>
        <text class="stat-label">å…¨éƒ¨</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">{{stats.upcoming}}</text>
        <text class="stat-label">å³å°†å¼€å§‹</text>
      </view>
      <view class="stat-item">
        <text class="stat-num">{{stats.nearby}}</text>
        <text class="stat-label">3kmå†…</text>
      </view>
    </view>
    <view class="search-bar">
      <text class="icon">ğŸ”</text>
      <input
        class="search-input"
        placeholder="æœç´¢æ´»åŠ¨/ä¸»åŠæ–¹/åœ°ç‚¹"
        value="{{searchValue}}"
        bindinput="handleSearchInput"
      />
    </view>
  </view>

  <scroll-view class="filter-tabs" scroll-x>
    <view
      class="tab {{filterStatus === option.id ? 'active' : ''}}"
      wx:for="{{filterOptions}}"
      wx:key="id"
      data-id="{{option.id}}"
      bindtap="handleFilterChange"
    >
      {{option.label}}
    </view>
  </scroll-view>

  <view wx:if="{{!displayList.length}}" class="empty-block card">
    <image src="https://cdn.example.com/empty-activity.png" mode="widthFix"></image>
    <text>æš‚æ— åŒ¹é…çš„æ´»åŠ¨ï¼Œæ¢ä¸ªæ¡ä»¶è¯•è¯•</text>
  </view>

  <view class="activity-list">
    <view
      class="card activity-card"
      wx:for="{{displayList}}"
      wx:key="id"
      bindtap="viewDetail"
      data-id="{{item.id}}"
    >
      <view class="cover-wrap">
      <image class="activity-cover" src="{{item.cover}}" mode="aspectFill" />
        <view class="status-badge {{item.status}}">
          {{item.status === 'upcoming' ? 'å³å°†å¼€å§‹' : item.status === 'ongoing' ? 'è¿›è¡Œä¸­' : 'å·²ç»“æŸ'}}
        </view>
      </view>
      <view class="activity-info">
        <view class="activity-title">{{item.title}}</view>
        <view class="activity-meta">
          <text>{{item.organizer}}</text>
          <text class="dot">Â·</text>
          <text>{{item.participantCount}}äººå·²æŠ¥</text>
        </view>
        <view class="activity-tags">
          <view class="tag" wx:for="{{item.tags}}" wx:key="*this">{{item}}</view>
        </view>
        <view class="activity-location">ğŸ“ {{item.location}}</view>
        <view class="activity-footer">
          <text>ğŸ• {{item.startTime}}</text>
          <text class="distance">{{item.distance}}km</text>
        </view>
      </view>
    </view>
  </view>
</view>
