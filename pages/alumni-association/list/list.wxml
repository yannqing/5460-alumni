<!--pages/alumni-association/list/list.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrap">
      <input class="search-input" type="text" placeholder="æœç´¢æ¯æ ¡åç§°ã€æ˜µç§°" value="{{keyword}}" bindinput="onSearchInput" bindconfirm="onSearch" />
      <view class="search-icon" bindtap="onSearch">ğŸ”</view>
    </view>
  </view>

  <!-- ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="filter-item {{activeTab === index ? 'active' : ''}}" wx:for="{{tabs}}" wx:key="*this" bindtap="switchTab" data-index="{{index}}">
      <text>{{item}}</text>
      <text class="filter-arrow">â–¾</text>
    </view>
  </view>

  <!-- æ ¡å‹ä¼šåˆ—è¡¨ -->
  <view class="association-list">
    <view class="association-card" wx:for="{{associationList}}" wx:key="id" bindtap="viewDetail" data-id="{{item.id}}">
      <!-- å¤´éƒ¨ï¼šåç§°å’Œè®¤è¯æ ‡è¯† -->
      <view class="card-header">
        <view class="card-title-row">
          <text class="card-title">{{item.name}}</text>
          <view wx:if="{{item.isCertified}}" class="cert-badge">âœ“è®¤è¯</view>
        </view>
      </view>

      <!-- å­¦æ ¡åç§° -->
      <view class="card-subtitle">
        <text class="subtitle-icon">ğŸ«</text>
        <text>{{item.schoolName}}</text>
      </view>

      <!-- ä½ç½®ä¿¡æ¯ -->
      <view class="card-location">
        <text class="location-icon">ğŸ“</text>
        <text>{{item.location}}</text>
      </view>

      <!-- æ ‡ç­¾ -->
      <view class="card-tags">
        <text class="mini-tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
        <text class="next-arrow">â€º</text>
      </view>

      <!-- åº•éƒ¨ï¼šç»Ÿè®¡æ•°æ®å’Œå…³æ³¨æŒ‰é’® -->
      <view class="card-footer">
        <view class="card-stats">
          <text class="stat-item">æ ¡å‹ä¼š {{item.associationCount}}</text>
          <text class="stat-item">æ ¡å‹ä¼š {{item.followCount}}</text>
        </view>
        <view class="card-action" catchtap="toggleFollow" data-id="{{item.id}}" data-followed="{{item.isFollowed}}">
          <view class="follow-btn {{item.isFollowed ? 'followed' : ''}}">
            {{item.isFollowed ? 'å·²å…³æ³¨' : '+ å…³æ³¨'}}
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-text">åŠ è½½ä¸­...</view>
    <view wx:elif="{{!hasMore}}" class="loading-text">æ²¡æœ‰æ›´å¤šäº†</view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{!loading && associationList.length === 0}}" class="empty-state">
      <image src="https://via.placeholder.com/200/f0f0f0/999999?text=Empty" mode="aspectFill" />
      <text>æš‚æ— æ•°æ®</text>
    </view>
  </view>
</view>
